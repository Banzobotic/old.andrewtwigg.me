import{S as rt,i as st,s as ot,e as _,k as B,c as p,a as g,m as L,d as c,g as k,J as m,l as U,K as G,t as C,h as D,b as w,L as P,M,n as N,N as lt,O as R,f,j as O}from"../../chunks/index-00c1654a.js";var I=(n=>(n.unClicked="unClicked",n.correct="correct",n.incorrect="incorrect",n))(I||{}),z=(n=>(n.goal="goal",n.death="death",n))(z||{});class it{constructor(){this.status="unClicked",this.type=Math.random()<.5?"goal":"death"}getStatusChar(){return this.status=="incorrect"?"X":""}getStyle(){return this.status=="unClicked"?"box-unClicked":`box-${this.type}`}}class nt{constructor(e){this.size=e,this.grid=[];for(let t=1;t<=this.size;t++){this.grid[t]=[];for(let r=1;r<=this.size;r++)this.grid[t][r]=new it}this.column_positions=[];for(let t=1;t<=this.size;t++)this.column_positions[t]=this.getPositionsInColumn(t);this.row_positions=[];for(let t=1;t<=this.size;t++)this.row_positions[t]=this.getPositionsInRow(t)}at_id(e){return this.grid[e.y][e.x]}at(e,t){return this.grid[t][e]}setStatus(e,t){this.grid[e.y][e.x].status=t}getPositionsInColumn(e){let t=0,r=[];for(let s=1;s<=this.size;s++)this.grid[s][e].type==z.goal?t+=1:t!=0&&(r.push(t.toString()),t=0);for(t!=0&&r.push(t.toString()),r=r.reverse();r.length<5;)r.push("  ");return r}getPositionsInRow(e){let t=0,r=[];for(let s=1;s<=this.size;s++)this.grid[e][s].type==z.goal?t+=1:t!=0&&(r.push(t.toString()),t=0);for(t!=0&&r.push(t.toString()),r=r.reverse();r.length<5;)r.push("  ");return r}}class at{constructor(e){let t=e.target.id.split("_");this.x=parseInt(t[0]),this.y=parseInt(t[1])}}function Y(n,e,t){const r=n.slice();return r[8]=e[t],r[10]=t,r}function F(n,e,t){const r=n.slice();return r[8]=e[t],r[12]=t,r}function Q(n,e,t){const r=n.slice();return r[8]=e[t],r[14]=t,r}function W(n,e,t){const r=n.slice();return r[8]=e[t],r[14]=t,r}function ct(n){let e,t,r=n[0].at(n[12],n[10]).getStatusChar()+"",s,l,o,i;return{c(){e=_("td"),t=_("button"),s=C(r),this.h()},l(a){e=p(a,"TD",{style:!0});var d=g(e);t=p(d,"BUTTON",{type:!0,id:!0,class:!0});var v=g(t);s=D(v,r),v.forEach(c),d.forEach(c),this.h()},h(){w(t,"type","button"),w(t,"id",n[12]+"_"+n[10]),w(t,"class",l="box "+n[0].at(n[12],n[10]).getStyle()+" svelte-1w6qpx0"),f(e,"padding","0"),f(e,"border","1px solid #ccc")},m(a,d){k(a,e,d),m(e,t),m(t,s),o||(i=[P(t,"mousedown",n[1]),P(t,"mouseover",n[1]),P(t,"focus",n[5])],o=!0)},p(a,d){d&1&&r!==(r=a[0].at(a[12],a[10]).getStatusChar()+"")&&O(s,r),d&1&&l!==(l="box "+a[0].at(a[12],a[10]).getStyle()+" svelte-1w6qpx0")&&w(t,"class",l)},d(a){a&&c(e),o=!1,lt(i)}}}function ht(n){let e,t,r,s=Array(5),l=[];for(let o=0;o<s.length;o+=1)l[o]=Z(Q(n,s,o));return{c(){e=_("td"),t=_("table"),r=_("tr");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=p(o,"TD",{style:!0});var i=g(e);t=p(i,"TABLE",{});var a=g(t);r=p(a,"TR",{});var d=g(r);for(let v=0;v<l.length;v+=1)l[v].l(d);d.forEach(c),a.forEach(c),i.forEach(c),this.h()},h(){f(e,"padding","0"),f(e,"border","1px solid #ccc"),f(e,"border-left","0px"),f(e,"border-top","0px")},m(o,i){k(o,e,i),m(e,t),m(t,r);for(let a=0;a<l.length;a+=1)l[a].m(r,null)},p(o,i){if(i&1){s=Array(5);let a;for(a=0;a<s.length;a+=1){const d=Q(o,s,a);l[a]?l[a].p(d,i):(l[a]=Z(d),l[a].c(),l[a].m(r,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=s.length}},d(o){o&&c(e),G(l,o)}}}function ut(n){let e;function t(l,o){return l[12]==0?dt:ft}let s=t(n)(n);return{c(){s.c(),e=U()},l(l){s.l(l),e=U()},m(l,o){s.m(l,o),k(l,e,o)},p(l,o){s.p(l,o)},d(l){s.d(l),l&&c(e)}}}function Z(n){let e,t,r=n[0].row_positions[n[10]][4-n[14]]+"",s;return{c(){e=_("td"),t=_("pre"),s=C(r),this.h()},l(l){e=p(l,"TD",{style:!0});var o=g(e);t=p(o,"PRE",{style:!0});var i=g(t);s=D(i,r),i.forEach(c),o.forEach(c),this.h()},h(){f(t,"margin","0"),f(t,"font-family","'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"),f(e,"color","white"),f(e,"padding","5px"),f(e,"text-align","right")},m(l,o){k(l,e,o),m(e,t),m(t,s)},p(l,o){o&1&&r!==(r=l[0].row_positions[l[10]][4-l[14]]+"")&&O(s,r)},d(l){l&&c(e)}}}function ft(n){let e,t,r=Array(5),s=[];for(let l=0;l<r.length;l+=1)s[l]=$(W(n,r,l));return{c(){e=_("td"),t=_("table");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=p(l,"TD",{style:!0});var o=g(e);t=p(o,"TABLE",{style:!0});var i=g(t);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(c),o.forEach(c),this.h()},h(){f(t,"margin","auto"),f(e,"padding","0"),f(e,"border","1px solid #ccc"),f(e,"border-left","0px"),f(e,"border-top","0px")},m(l,o){k(l,e,o),m(e,t);for(let i=0;i<s.length;i+=1)s[i].m(t,null)},p(l,o){if(o&1){r=Array(5);let i;for(i=0;i<r.length;i+=1){const a=W(l,r,i);s[i]?s[i].p(a,o):(s[i]=$(a),s[i].c(),s[i].m(t,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},d(l){l&&c(e),G(s,l)}}}function dt(n){let e;return{c(){e=_("td"),this.h()},l(t){e=p(t,"TD",{style:!0}),g(e).forEach(c),this.h()},h(){f(e,"padding","0"),f(e,"border","1px solid #ccc"),f(e,"border-left","0px"),f(e,"border-top","0px")},m(t,r){k(t,e,r)},p:N,d(t){t&&c(e)}}}function $(n){let e,t,r,s=n[0].column_positions[n[12]][4-n[14]]+"",l;return{c(){e=_("tr"),t=_("td"),r=_("pre"),l=C(s),this.h()},l(o){e=p(o,"TR",{});var i=g(e);t=p(i,"TD",{style:!0});var a=g(t);r=p(a,"PRE",{style:!0});var d=g(r);l=D(d,s),d.forEach(c),a.forEach(c),i.forEach(c),this.h()},h(){f(r,"margin","0"),f(r,"font-family","'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"),f(t,"color","white")},m(o,i){k(o,e,i),m(e,t),m(t,r),m(r,l)},p(o,i){i&1&&s!==(s=o[0].column_positions[o[12]][4-o[14]]+"")&&O(l,s)},d(o){o&&c(e)}}}function tt(n){let e;function t(l,o){return l[10]==0?ut:l[12]==0?ht:ct}let s=t(n)(n);return{c(){s.c(),e=U()},l(l){s.l(l),e=U()},m(l,o){s.m(l,o),k(l,e,o)},p(l,o){s.p(l,o)},d(l){s.d(l),l&&c(e)}}}function et(n){let e,t,r=Array(q+1),s=[];for(let l=0;l<r.length;l+=1)s[l]=tt(F(n,r,l));return{c(){e=_("tr");for(let l=0;l<s.length;l+=1)s[l].c();t=B()},l(l){e=p(l,"TR",{});var o=g(e);for(let i=0;i<s.length;i+=1)s[i].l(o);t=L(o),o.forEach(c)},m(l,o){k(l,e,o);for(let i=0;i<s.length;i+=1)s[i].m(e,null);m(e,t)},p(l,o){if(o&3){r=Array(q+1);let i;for(i=0;i<r.length;i+=1){const a=F(l,r,i);s[i]?s[i].p(a,o):(s[i]=tt(a),s[i].c(),s[i].m(e,t))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},d(l){l&&c(e),G(s,l)}}}function _t(n){let e,t,r,s,l,o,i,a,d,v,u,T,x,j,A=Array(q+1),y=[];for(let h=0;h<A.length;h+=1)y[h]=et(Y(n,A,h));return{c(){e=_("head"),t=_("title"),r=C("Picross"),s=B(),l=_("body"),o=_("p"),i=_("a"),a=C("Home"),d=B(),v=_("main"),u=_("table");for(let h=0;h<y.length;h+=1)y[h].c();T=B(),this.h()},l(h){e=p(h,"HEAD",{});var E=g(e);t=p(E,"TITLE",{});var b=g(t);r=D(b,"Picross"),b.forEach(c),E.forEach(c),s=L(h),l=p(h,"BODY",{class:!0});var S=g(l);o=p(S,"P",{class:!0});var V=g(o);i=p(V,"A",{href:!0});var J=g(i);a=D(J,"Home"),J.forEach(c),V.forEach(c),d=L(S),v=p(S,"MAIN",{class:!0});var K=g(v);u=p(K,"TABLE",{class:!0});var X=g(u);for(let H=0;H<y.length;H+=1)y[H].l(X);X.forEach(c),K.forEach(c),S.forEach(c),T=L(h),this.h()},h(){w(i,"href","/"),w(o,"class","svelte-1w6qpx0"),w(u,"class","grid svelte-1w6qpx0"),w(v,"class","svelte-1w6qpx0"),w(l,"class","svelte-1w6qpx0")},m(h,E){k(h,e,E),m(e,t),m(t,r),k(h,s,E),k(h,l,E),m(l,o),m(o,i),m(i,a),m(l,d),m(l,v),m(v,u);for(let b=0;b<y.length;b+=1)y[b].m(u,null);k(h,T,E),x||(j=[P(document.body,"contextmenu",M(n[2])),P(document.body,"dragstart",M(n[3])),P(document.body,"selectstart",M(n[4]))],x=!0)},p(h,[E]){if(E&3){A=Array(q+1);let b;for(b=0;b<A.length;b+=1){const S=Y(h,A,b);y[b]?y[b].p(S,E):(y[b]=et(S),y[b].c(),y[b].m(u,null))}for(;b<y.length;b+=1)y[b].d(1);y.length=A.length}},i:N,o:N,d(h){h&&c(e),h&&c(s),h&&c(l),G(y,h),h&&c(T),x=!1,lt(j)}}}let q=10;function pt(n,e,t){var r;(function(u){u[u.left=1]="left",u[u.right=2]="right"})(r||(r={}));let s=new nt(q);console.log(s);function l(){t(0,s)}async function o(u){let T=new at(u),x=s.at_id(T);x.status==I.unClicked&&(u.buttons==r.left?s.setStatus(T,x.type==z.goal?I.correct:I.incorrect):u.buttons==r.right&&s.setStatus(T,x.type==z.death?I.correct:I.incorrect)),l()}function i(u){R.call(this,n,u)}function a(u){R.call(this,n,u)}function d(u){R.call(this,n,u)}function v(u){R.call(this,n,u)}return[s,o,i,a,d,v]}class bt extends rt{constructor(e){super(),st(this,e,pt,_t,ot,{})}}export{bt as default};
