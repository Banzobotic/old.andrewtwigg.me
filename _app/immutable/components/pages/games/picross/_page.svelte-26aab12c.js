var tt=Object.defineProperty;var et=(n,t,e)=>t in n?tt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var w=(n,t,e)=>(et(n,typeof t!="symbol"?t+"":t,e),e);import{S as lt,i as rt,s as ot,k as p,q as $,a as B,w as st,l as g,m as b,r as G,h as c,c as L,x as nt,n as A,b as k,G as y,y as it,J as C,K as q,f as at,t as ct,z as ht,L as U,M as Z,N as R,e as N,p as f,u as O,B as ut}from"../../../../chunks/index-9564b846.js";import{N as ft}from"../../../../chunks/Navbar-840fa1dc.js";var z=(n=>(n.unClicked="unClicked",n.correct="correct",n.incorrect="incorrect",n))(z||{}),D=(n=>(n.goal="goal",n.death="death",n))(D||{});class _t{constructor(){w(this,"status");w(this,"type");this.status="unClicked",this.type=Math.random()<.5?"goal":"death"}getStatusChar(){return this.status=="incorrect"?"X":""}getStyle(){return this.status=="unClicked"?"box-unClicked":`box-${this.type}`}}class dt{constructor(t){w(this,"grid");w(this,"size");w(this,"column_positions");w(this,"row_positions");this.size=t,this.grid=[];for(let e=1;e<=this.size;e++){this.grid[e]=[];for(let r=1;r<=this.size;r++)this.grid[e][r]=new _t}this.column_positions=[];for(let e=1;e<=this.size;e++)this.column_positions[e]=this.getPositionsInColumn(e);this.row_positions=[];for(let e=1;e<=this.size;e++)this.row_positions[e]=this.getPositionsInRow(e)}at_id(t){return this.grid[t.y][t.x]}at(t,e){return this.grid[e][t]}setStatus(t,e){this.grid[t.y][t.x].status=e}getPositionsInColumn(t){let e=0,r=[];for(let o=1;o<=this.size;o++)this.grid[o][t].type==D.goal?e+=1:e!=0&&(r.push(e.toString()),e=0);for(e!=0&&r.push(e.toString()),r=r.reverse();r.length<5;)r.push("  ");return r}getPositionsInRow(t){let e=0,r=[];for(let o=1;o<=this.size;o++)this.grid[t][o].type==D.goal?e+=1:e!=0&&(r.push(e.toString()),e=0);for(e!=0&&r.push(e.toString()),r=r.reverse();r.length<5;)r.push("  ");return r}}class pt{constructor(t){w(this,"x");w(this,"y");let e=t.target.id.split("_");this.x=parseInt(e[0]),this.y=parseInt(e[1])}}function H(n,t,e){const r=n.slice();return r[8]=t[e],r[10]=e,r}function J(n,t,e){const r=n.slice();return r[8]=t[e],r[12]=e,r}function K(n,t,e){const r=n.slice();return r[8]=t[e],r[14]=e,r}function X(n,t,e){const r=n.slice();return r[8]=t[e],r[14]=e,r}function gt(n){let t,e,r=n[0].at(n[12],n[10]).getStatusChar()+"",o,l,s,i;return{c(){t=p("td"),e=p("button"),o=$(r),this.h()},l(a){t=g(a,"TD",{style:!0});var u=b(t);e=g(u,"BUTTON",{type:!0,id:!0,class:!0});var v=b(e);o=G(v,r),v.forEach(c),u.forEach(c),this.h()},h(){A(e,"type","button"),A(e,"id",n[12]+"_"+n[10]),A(e,"class",l="box "+n[0].at(n[12],n[10]).getStyle()+" svelte-bll8fi"),f(t,"padding","0"),f(t,"border","1px solid #ccc")},m(a,u){k(a,t,u),y(t,e),y(e,o),s||(i=[C(e,"mousedown",n[1]),C(e,"mouseover",n[1]),C(e,"focus",n[5])],s=!0)},p(a,u){u&1&&r!==(r=a[0].at(a[12],a[10]).getStatusChar()+"")&&O(o,r),u&1&&l!==(l="box "+a[0].at(a[12],a[10]).getStyle()+" svelte-bll8fi")&&A(e,"class",l)},d(a){a&&c(t),s=!1,Z(i)}}}function bt(n){let t,e,r,o=Array(5),l=[];for(let s=0;s<o.length;s+=1)l[s]=Y(K(n,o,s));return{c(){t=p("td"),e=p("table"),r=p("tr");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=g(s,"TD",{style:!0});var i=b(t);e=g(i,"TABLE",{});var a=b(e);r=g(a,"TR",{});var u=b(r);for(let v=0;v<l.length;v+=1)l[v].l(u);u.forEach(c),a.forEach(c),i.forEach(c),this.h()},h(){f(t,"padding","0"),f(t,"border","1px solid #ccc"),f(t,"border-left","0px"),f(t,"border-top","0px")},m(s,i){k(s,t,i),y(t,e),y(e,r);for(let a=0;a<l.length;a+=1)l[a].m(r,null)},p(s,i){if(i&1){o=Array(5);let a;for(a=0;a<o.length;a+=1){const u=K(s,o,a);l[a]?l[a].p(u,i):(l[a]=Y(u),l[a].c(),l[a].m(r,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=o.length}},d(s){s&&c(t),U(l,s)}}}function mt(n){let t;function e(l,s){return l[12]==0?vt:yt}let o=e(n)(n);return{c(){o.c(),t=N()},l(l){o.l(l),t=N()},m(l,s){o.m(l,s),k(l,t,s)},p(l,s){o.p(l,s)},d(l){o.d(l),l&&c(t)}}}function Y(n){let t,e,r=n[0].row_positions[n[10]][4-n[14]]+"",o;return{c(){t=p("td"),e=p("pre"),o=$(r),this.h()},l(l){t=g(l,"TD",{style:!0});var s=b(t);e=g(s,"PRE",{style:!0});var i=b(e);o=G(i,r),i.forEach(c),s.forEach(c),this.h()},h(){f(e,"margin","0"),f(e,"font-family","'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"),f(t,"color","white"),f(t,"padding","5px"),f(t,"text-align","right")},m(l,s){k(l,t,s),y(t,e),y(e,o)},p(l,s){s&1&&r!==(r=l[0].row_positions[l[10]][4-l[14]]+"")&&O(o,r)},d(l){l&&c(t)}}}function yt(n){let t,e,r=Array(5),o=[];for(let l=0;l<r.length;l+=1)o[l]=F(X(n,r,l));return{c(){t=p("td"),e=p("table");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){t=g(l,"TD",{style:!0});var s=b(t);e=g(s,"TABLE",{style:!0});var i=b(e);for(let a=0;a<o.length;a+=1)o[a].l(i);i.forEach(c),s.forEach(c),this.h()},h(){f(e,"margin","auto"),f(t,"padding","0"),f(t,"border","1px solid #ccc"),f(t,"border-left","0px"),f(t,"border-top","0px")},m(l,s){k(l,t,s),y(t,e);for(let i=0;i<o.length;i+=1)o[i].m(e,null)},p(l,s){if(s&1){r=Array(5);let i;for(i=0;i<r.length;i+=1){const a=X(l,r,i);o[i]?o[i].p(a,s):(o[i]=F(a),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(l){l&&c(t),U(o,l)}}}function vt(n){let t;return{c(){t=p("td"),this.h()},l(e){t=g(e,"TD",{style:!0}),b(t).forEach(c),this.h()},h(){f(t,"padding","0"),f(t,"border","1px solid #ccc"),f(t,"border-left","0px"),f(t,"border-top","0px")},m(e,r){k(e,t,r)},p:ut,d(e){e&&c(t)}}}function F(n){let t,e,r,o=n[0].column_positions[n[12]][4-n[14]]+"",l;return{c(){t=p("tr"),e=p("td"),r=p("pre"),l=$(o),this.h()},l(s){t=g(s,"TR",{});var i=b(t);e=g(i,"TD",{style:!0});var a=b(e);r=g(a,"PRE",{style:!0});var u=b(r);l=G(u,o),u.forEach(c),a.forEach(c),i.forEach(c),this.h()},h(){f(r,"margin","0"),f(r,"font-family","'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"),f(e,"color","white")},m(s,i){k(s,t,i),y(t,e),y(e,r),y(r,l)},p(s,i){i&1&&o!==(o=s[0].column_positions[s[12]][4-s[14]]+"")&&O(l,o)},d(s){s&&c(t)}}}function Q(n){let t;function e(l,s){return l[10]==0?mt:l[12]==0?bt:gt}let o=e(n)(n);return{c(){o.c(),t=N()},l(l){o.l(l),t=N()},m(l,s){o.m(l,s),k(l,t,s)},p(l,s){o.p(l,s)},d(l){o.d(l),l&&c(t)}}}function W(n){let t,e,r=Array(P+1),o=[];for(let l=0;l<r.length;l+=1)o[l]=Q(J(n,r,l));return{c(){t=p("tr");for(let l=0;l<o.length;l+=1)o[l].c();e=B()},l(l){t=g(l,"TR",{});var s=b(t);for(let i=0;i<o.length;i+=1)o[i].l(s);e=L(s),s.forEach(c)},m(l,s){k(l,t,s);for(let i=0;i<o.length;i+=1)o[i].m(t,null);y(t,e)},p(l,s){if(s&3){r=Array(P+1);let i;for(i=0;i<r.length;i+=1){const a=J(l,r,i);o[i]?o[i].p(a,s):(o[i]=Q(a),o[i].c(),o[i].m(t,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(l){l&&c(t),U(o,l)}}}function kt(n){let t,e,r,o,l,s,i,a,u,v,_,T,x;s=new ft({props:{active:""}});let I=Array(P+1),m=[];for(let h=0;h<I.length;h+=1)m[h]=W(H(n,I,h));return{c(){t=p("head"),e=p("title"),r=$("Picross"),o=B(),l=p("body"),st(s.$$.fragment),i=B(),a=p("main"),u=p("table");for(let h=0;h<m.length;h+=1)m[h].c();v=B(),this.h()},l(h){t=g(h,"HEAD",{});var E=b(t);e=g(E,"TITLE",{});var d=b(e);r=G(d,"Picross"),d.forEach(c),E.forEach(c),o=L(h),l=g(h,"BODY",{class:!0});var S=b(l);nt(s.$$.fragment,S),i=L(S),a=g(S,"MAIN",{class:!0});var V=b(a);u=g(V,"TABLE",{class:!0});var j=b(u);for(let M=0;M<m.length;M+=1)m[M].l(j);j.forEach(c),V.forEach(c),S.forEach(c),v=L(h),this.h()},h(){A(u,"class","grid svelte-bll8fi"),A(a,"class","svelte-bll8fi"),A(l,"class","svelte-bll8fi")},m(h,E){k(h,t,E),y(t,e),y(e,r),k(h,o,E),k(h,l,E),it(s,l,null),y(l,i),y(l,a),y(a,u);for(let d=0;d<m.length;d+=1)m[d].m(u,null);k(h,v,E),_=!0,T||(x=[C(document.body,"contextmenu",q(n[2])),C(document.body,"dragstart",q(n[3])),C(document.body,"selectstart",q(n[4]))],T=!0)},p(h,[E]){if(E&3){I=Array(P+1);let d;for(d=0;d<I.length;d+=1){const S=H(h,I,d);m[d]?m[d].p(S,E):(m[d]=W(S),m[d].c(),m[d].m(u,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=I.length}},i(h){_||(at(s.$$.fragment,h),_=!0)},o(h){ct(s.$$.fragment,h),_=!1},d(h){h&&c(t),h&&c(o),h&&c(l),ht(s),U(m,h),h&&c(v),T=!1,Z(x)}}}let P=10;function Et(n,t,e){var r;(function(_){_[_.left=1]="left",_[_.right=2]="right"})(r||(r={}));let o=new dt(P);console.log(o);function l(){e(0,o)}async function s(_){let T=new pt(_),x=o.at_id(T);x.status==z.unClicked&&(_.buttons==r.left?o.setStatus(T,x.type==D.goal?z.correct:z.incorrect):_.buttons==r.right&&o.setStatus(T,x.type==D.death?z.correct:z.incorrect)),l()}function i(_){R.call(this,n,_)}function a(_){R.call(this,n,_)}function u(_){R.call(this,n,_)}function v(_){R.call(this,n,_)}return[o,s,i,a,u,v]}class At extends lt{constructor(t){super(),rt(this,t,Et,kt,ot,{})}}export{At as default};
