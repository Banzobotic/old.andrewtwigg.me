var st=Object.defineProperty;var ot=(n,t,e)=>t in n?st(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var w=(n,t,e)=>(ot(n,typeof t!="symbol"?t+"":t,e),e);import{S as it,i as nt,s as at,k as _,q as C,a as L,l as p,m as g,r as D,h as c,c as G,n as x,b as k,G as m,I as z,J as N,B as O,K as H,L as rt,M as B,e as U,p as f,u as V}from"../../../../chunks/index-234dd142.js";var P=(n=>(n.unClicked="unClicked",n.correct="correct",n.incorrect="incorrect",n))(P||{}),q=(n=>(n.goal="goal",n.death="death",n))(q||{});class ct{constructor(){w(this,"status");w(this,"type");this.status="unClicked",this.type=Math.random()<.5?"goal":"death"}getStatusChar(){return this.status=="incorrect"?"X":""}getStyle(){return this.status=="unClicked"?"box-unClicked":`box-${this.type}`}}class ht{constructor(t){w(this,"grid");w(this,"size");w(this,"column_positions");w(this,"row_positions");this.size=t,this.grid=[];for(let e=1;e<=this.size;e++){this.grid[e]=[];for(let r=1;r<=this.size;r++)this.grid[e][r]=new ct}this.column_positions=[];for(let e=1;e<=this.size;e++)this.column_positions[e]=this.getPositionsInColumn(e);this.row_positions=[];for(let e=1;e<=this.size;e++)this.row_positions[e]=this.getPositionsInRow(e)}at_id(t){return this.grid[t.y][t.x]}at(t,e){return this.grid[e][t]}setStatus(t,e){this.grid[t.y][t.x].status=e}getPositionsInColumn(t){let e=0,r=[];for(let s=1;s<=this.size;s++)this.grid[s][t].type==q.goal?e+=1:e!=0&&(r.push(e.toString()),e=0);for(e!=0&&r.push(e.toString()),r=r.reverse();r.length<5;)r.push("  ");return r}getPositionsInRow(t){let e=0,r=[];for(let s=1;s<=this.size;s++)this.grid[t][s].type==q.goal?e+=1:e!=0&&(r.push(e.toString()),e=0);for(e!=0&&r.push(e.toString()),r=r.reverse();r.length<5;)r.push("  ");return r}}class ut{constructor(t){w(this,"x");w(this,"y");let e=t.target.id.split("_");this.x=parseInt(e[0]),this.y=parseInt(e[1])}}function F(n,t,e){const r=n.slice();return r[8]=t[e],r[10]=e,r}function Q(n,t,e){const r=n.slice();return r[8]=t[e],r[12]=e,r}function W(n,t,e){const r=n.slice();return r[8]=t[e],r[14]=e,r}function Z(n,t,e){const r=n.slice();return r[8]=t[e],r[14]=e,r}function ft(n){let t,e,r=n[0].at(n[12],n[10]).getStatusChar()+"",s,l,o,i;return{c(){t=_("td"),e=_("button"),s=C(r),this.h()},l(a){t=p(a,"TD",{style:!0});var d=g(t);e=p(d,"BUTTON",{type:!0,id:!0,class:!0});var v=g(e);s=D(v,r),v.forEach(c),d.forEach(c),this.h()},h(){x(e,"type","button"),x(e,"id",n[12]+"_"+n[10]),x(e,"class",l="box "+n[0].at(n[12],n[10]).getStyle()+" svelte-1w6qpx0"),f(t,"padding","0"),f(t,"border","1px solid #ccc")},m(a,d){k(a,t,d),m(t,e),m(e,s),o||(i=[z(e,"mousedown",n[1]),z(e,"mouseover",n[1]),z(e,"focus",n[5])],o=!0)},p(a,d){d&1&&r!==(r=a[0].at(a[12],a[10]).getStatusChar()+"")&&V(s,r),d&1&&l!==(l="box "+a[0].at(a[12],a[10]).getStyle()+" svelte-1w6qpx0")&&x(e,"class",l)},d(a){a&&c(t),o=!1,rt(i)}}}function dt(n){let t,e,r,s=Array(5),l=[];for(let o=0;o<s.length;o+=1)l[o]=$(W(n,s,o));return{c(){t=_("td"),e=_("table"),r=_("tr");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){t=p(o,"TD",{style:!0});var i=g(t);e=p(i,"TABLE",{});var a=g(e);r=p(a,"TR",{});var d=g(r);for(let v=0;v<l.length;v+=1)l[v].l(d);d.forEach(c),a.forEach(c),i.forEach(c),this.h()},h(){f(t,"padding","0"),f(t,"border","1px solid #ccc"),f(t,"border-left","0px"),f(t,"border-top","0px")},m(o,i){k(o,t,i),m(t,e),m(e,r);for(let a=0;a<l.length;a+=1)l[a].m(r,null)},p(o,i){if(i&1){s=Array(5);let a;for(a=0;a<s.length;a+=1){const d=W(o,s,a);l[a]?l[a].p(d,i):(l[a]=$(d),l[a].c(),l[a].m(r,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=s.length}},d(o){o&&c(t),H(l,o)}}}function _t(n){let t;function e(l,o){return l[12]==0?gt:pt}let s=e(n)(n);return{c(){s.c(),t=U()},l(l){s.l(l),t=U()},m(l,o){s.m(l,o),k(l,t,o)},p(l,o){s.p(l,o)},d(l){s.d(l),l&&c(t)}}}function $(n){let t,e,r=n[0].row_positions[n[10]][4-n[14]]+"",s;return{c(){t=_("td"),e=_("pre"),s=C(r),this.h()},l(l){t=p(l,"TD",{style:!0});var o=g(t);e=p(o,"PRE",{style:!0});var i=g(e);s=D(i,r),i.forEach(c),o.forEach(c),this.h()},h(){f(e,"margin","0"),f(e,"font-family","'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"),f(t,"color","white"),f(t,"padding","5px"),f(t,"text-align","right")},m(l,o){k(l,t,o),m(t,e),m(e,s)},p(l,o){o&1&&r!==(r=l[0].row_positions[l[10]][4-l[14]]+"")&&V(s,r)},d(l){l&&c(t)}}}function pt(n){let t,e,r=Array(5),s=[];for(let l=0;l<r.length;l+=1)s[l]=tt(Z(n,r,l));return{c(){t=_("td"),e=_("table");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){t=p(l,"TD",{style:!0});var o=g(t);e=p(o,"TABLE",{style:!0});var i=g(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(c),o.forEach(c),this.h()},h(){f(e,"margin","auto"),f(t,"padding","0"),f(t,"border","1px solid #ccc"),f(t,"border-left","0px"),f(t,"border-top","0px")},m(l,o){k(l,t,o),m(t,e);for(let i=0;i<s.length;i+=1)s[i].m(e,null)},p(l,o){if(o&1){r=Array(5);let i;for(i=0;i<r.length;i+=1){const a=Z(l,r,i);s[i]?s[i].p(a,o):(s[i]=tt(a),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},d(l){l&&c(t),H(s,l)}}}function gt(n){let t;return{c(){t=_("td"),this.h()},l(e){t=p(e,"TD",{style:!0}),g(t).forEach(c),this.h()},h(){f(t,"padding","0"),f(t,"border","1px solid #ccc"),f(t,"border-left","0px"),f(t,"border-top","0px")},m(e,r){k(e,t,r)},p:O,d(e){e&&c(t)}}}function tt(n){let t,e,r,s=n[0].column_positions[n[12]][4-n[14]]+"",l;return{c(){t=_("tr"),e=_("td"),r=_("pre"),l=C(s),this.h()},l(o){t=p(o,"TR",{});var i=g(t);e=p(i,"TD",{style:!0});var a=g(e);r=p(a,"PRE",{style:!0});var d=g(r);l=D(d,s),d.forEach(c),a.forEach(c),i.forEach(c),this.h()},h(){f(r,"margin","0"),f(r,"font-family","'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"),f(e,"color","white")},m(o,i){k(o,t,i),m(t,e),m(e,r),m(r,l)},p(o,i){i&1&&s!==(s=o[0].column_positions[o[12]][4-o[14]]+"")&&V(l,s)},d(o){o&&c(t)}}}function et(n){let t;function e(l,o){return l[10]==0?_t:l[12]==0?dt:ft}let s=e(n)(n);return{c(){s.c(),t=U()},l(l){s.l(l),t=U()},m(l,o){s.m(l,o),k(l,t,o)},p(l,o){s.p(l,o)},d(l){s.d(l),l&&c(t)}}}function lt(n){let t,e,r=Array(R+1),s=[];for(let l=0;l<r.length;l+=1)s[l]=et(Q(n,r,l));return{c(){t=_("tr");for(let l=0;l<s.length;l+=1)s[l].c();e=L()},l(l){t=p(l,"TR",{});var o=g(t);for(let i=0;i<s.length;i+=1)s[i].l(o);e=G(o),o.forEach(c)},m(l,o){k(l,t,o);for(let i=0;i<s.length;i+=1)s[i].m(t,null);m(t,e)},p(l,o){if(o&3){r=Array(R+1);let i;for(i=0;i<r.length;i+=1){const a=Q(l,r,i);s[i]?s[i].p(a,o):(s[i]=et(a),s[i].c(),s[i].m(t,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},d(l){l&&c(t),H(s,l)}}}function bt(n){let t,e,r,s,l,o,i,a,d,v,u,T,S,j,I=Array(R+1),y=[];for(let h=0;h<I.length;h+=1)y[h]=lt(F(n,I,h));return{c(){t=_("head"),e=_("title"),r=C("Picross"),s=L(),l=_("body"),o=_("p"),i=_("a"),a=C("Home"),d=L(),v=_("main"),u=_("table");for(let h=0;h<y.length;h+=1)y[h].c();T=L(),this.h()},l(h){t=p(h,"HEAD",{});var E=g(t);e=p(E,"TITLE",{});var b=g(e);r=D(b,"Picross"),b.forEach(c),E.forEach(c),s=G(h),l=p(h,"BODY",{class:!0});var A=g(l);o=p(A,"P",{class:!0});var J=g(o);i=p(J,"A",{href:!0});var K=g(i);a=D(K,"Home"),K.forEach(c),J.forEach(c),d=G(A),v=p(A,"MAIN",{class:!0});var X=g(v);u=p(X,"TABLE",{class:!0});var Y=g(u);for(let M=0;M<y.length;M+=1)y[M].l(Y);Y.forEach(c),X.forEach(c),A.forEach(c),T=G(h),this.h()},h(){x(i,"href","/"),x(o,"class","svelte-1w6qpx0"),x(u,"class","grid svelte-1w6qpx0"),x(v,"class","svelte-1w6qpx0"),x(l,"class","svelte-1w6qpx0")},m(h,E){k(h,t,E),m(t,e),m(e,r),k(h,s,E),k(h,l,E),m(l,o),m(o,i),m(i,a),m(l,d),m(l,v),m(v,u);for(let b=0;b<y.length;b+=1)y[b].m(u,null);k(h,T,E),S||(j=[z(document.body,"contextmenu",N(n[2])),z(document.body,"dragstart",N(n[3])),z(document.body,"selectstart",N(n[4]))],S=!0)},p(h,[E]){if(E&3){I=Array(R+1);let b;for(b=0;b<I.length;b+=1){const A=F(h,I,b);y[b]?y[b].p(A,E):(y[b]=lt(A),y[b].c(),y[b].m(u,null))}for(;b<y.length;b+=1)y[b].d(1);y.length=I.length}},i:O,o:O,d(h){h&&c(t),h&&c(s),h&&c(l),H(y,h),h&&c(T),S=!1,rt(j)}}}let R=10;function mt(n,t,e){var r;(function(u){u[u.left=1]="left",u[u.right=2]="right"})(r||(r={}));let s=new ht(R);console.log(s);function l(){e(0,s)}async function o(u){let T=new ut(u),S=s.at_id(T);S.status==P.unClicked&&(u.buttons==r.left?s.setStatus(T,S.type==q.goal?P.correct:P.incorrect):u.buttons==r.right&&s.setStatus(T,S.type==q.death?P.correct:P.incorrect)),l()}function i(u){B.call(this,n,u)}function a(u){B.call(this,n,u)}function d(u){B.call(this,n,u)}function v(u){B.call(this,n,u)}return[s,o,i,a,d,v]}class kt extends it{constructor(t){super(),nt(this,t,mt,bt,at,{})}}export{kt as default};
